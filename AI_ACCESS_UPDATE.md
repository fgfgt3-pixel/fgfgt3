# AI_ACCESS_UPDATE.md
<!-- AI Ï†ëÍ∑ºÏö© ÌîÑÎ°úÏ†ùÌä∏ ÏÉÅÌÉú Î≥µÏõê ÌååÏùº - Grok ÏßÑÏûÖÏ†ê -->

## ü§ñ GrokÏùÑ ÏúÑÌïú ÌîÑÎ°úÏ†ùÌä∏ ÏôÑÏ†Ñ Í∞ÄÏù¥Îìú (2025-08-30)

### üìã ÌîÑÎ°úÏ†ùÌä∏ Í∞úÏöî
**ÌÇ§ÏõÄ OpenAPI+ Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏàòÏßë ÏãúÏä§ÌÖú**
- Î™©Ï†Å: Ïã§ÏãúÍ∞Ñ Ï£ºÏãù Ìã± Îç∞Ïù¥ÌÑ∞ ÏàòÏßë Î∞è 44Í∞ú ÏßÄÌëú Í≥ÑÏÇ∞
- ÏÉÅÌÉú: **ÏôÑÏ†Ñ Ï†ïÏÉÅ ÏûëÎèô** (2025-08-29 ÎßàÏßÄÎßâ ÌÖåÏä§Ìä∏ ÏôÑÎ£å)
- ÌôòÍ≤Ω: Python 3.8 32ÎπÑÌä∏ + PyQt5 + Windows ÌïÑÏàò

### üèóÔ∏è ÌïµÏã¨ ÌååÏùº Íµ¨Ï°∞ Î∞è Ïó≠Ìï†

#### 1. Î©îÏù∏ Ïã§Ìñâ ÌååÏùº
- **`main.py`** - ÏãúÏä§ÌÖú ÌÜµÌï© Í¥ÄÎ¶¨Ïûê
  - `KiwoomDataCollector` ÌÅ¥ÎûòÏä§: Ï†ÑÏ≤¥ ÏãúÏä§ÌÖú Ïò§ÏºÄÏä§Ìä∏Î†àÏù¥ÏÖò
  - Î™®Îì† Î™®Îìà Ï¥àÍ∏∞Ìôî Î∞è ÏΩúÎ∞± Ïó∞Í≤∞
  - Ïã§Ìñâ: `C:\python38_32bit\python.exe main.py`

#### 2. ÌÇ§ÏõÄ API Ïó∞Í≤∞
- **`kiwoom_client.py`** - ÌÇ§ÏõÄ OpenAPI+ OCX Ïª®Ìä∏Î°§ Í¥ÄÎ¶¨
  - `KiwoomClient`: ÌÇ§ÏõÄ API ÎûòÌçº ÌÅ¥ÎûòÏä§
  - `SimpleTRManager`: TR ÏöîÏ≤≠ 60Ï¥à Ï†úÌïú Í¥ÄÎ¶¨ (QTimer Î∞©Ïãù)
  - `ConnectionMonitor`: Ïó∞Í≤∞ ÏÉÅÌÉú Î™®ÎãàÌÑ∞ÎßÅ Î∞è ÏûêÎèô Ïû¨Ïó∞Í≤∞
  - Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ Îì±Î°ù/ÏàòÏã† (`SetRealReg`, `OnReceiveRealData`)

#### 3. Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ ÏóîÏßÑ
- **`data_processor.py`** - 44Í∞ú ÏßÄÌëú Ïã§ÏãúÍ∞Ñ Í≥ÑÏÇ∞
  - `IndicatorCalculator`: 36Í∞ú Í∏∞Î≥∏ ÏßÄÌëú Í≥ÑÏÇ∞ (Í∞ÄÍ≤©, Î≥ºÎ•®, Ìò∏Í∞Ä Îì±)
  - `DataProcessor`: Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÌååÏã± Î∞è ÏßÄÌëú ÌÜµÌï©
  - `InvestorNetManager`: 11Í∞ú ÏàòÍ∏â ÏßÄÌëú Í¥ÄÎ¶¨ (OPT10059 TR)
  - sRealTypeÎ≥Ñ Î∂ÑÍ∏∞ Ï≤òÎ¶¨ ("Ï£ºÏãùÏ≤¥Í≤∞", "Ï£ºÏãùÌò∏Í∞ÄÏûîÎüâ")

#### 4. CSV Ï†ÄÏû• ÏãúÏä§ÌÖú
- **`csv_writer.py`** - Î∞∞Ïπò Ï†ÄÏû• ÏµúÏ†ÅÌôî
  - `BatchCSVWriter`: ÏÑ§Ï†ï Í∞ÄÎä•Ìïú Î∞∞Ïπò Ï†ÄÏû• (Í∏∞Î≥∏ 100Ìã±)
  - 44Í∞ú Ïª¨Îüº CSV ÌååÏùº ÏÉùÏÑ±
  - ÌååÏùºÎ™Ö: `{stock_code}_44indicators_realtime_{YYYYMMDD}.csv`
  - Í≤ΩÎ°ú: `pure_websocket_data/` (ÏûêÎèô ÏÉùÏÑ±)

#### 5. ÏÑ§Ï†ï Í¥ÄÎ¶¨
- **`config.py`** - Ï§ëÏïô ÏßëÏ§ë ÏÑ§Ï†ï Í¥ÄÎ¶¨
  - `TARGET_STOCKS`: ÎåÄÏÉÅ Ï¢ÖÎ™© Î¶¨Ïä§Ìä∏ (ÌòÑÏû¨ 161390 1Í∞ú)
  - `KiwoomConfig`: ÌÇ§ÏõÄ API ÏÑ§Ï†ï (ÌôîÎ©¥Î≤àÌò∏, Í≥ÑÏ†ï Îì±)
  - `OptimizedFID`: Ïã§ÏãúÍ∞Ñ Îì±Î°ùÏö© FID Îß§Ìïë
  - `DataConfig`: CSV Î∞è ÏßÄÌëú ÏÑ§Ï†ï

#### 6. Î≥¥Ïïà ÎèÑÍµ¨
- **`secure_helper.py`** - ÏïîÌò∏ÌôîÎêú ÏûêÎèô Î°úÍ∑∏Ïù∏
  - `SecureLoginHelper`: Ïù∏Ï¶ù Ï†ïÎ≥¥ ÏïîÌò∏Ìôî Í¥ÄÎ¶¨
  - Î©îÎ™®Î¶¨ Î≥¥Ïïà: ÏÇ¨Ïö© ÌõÑ Ï¶âÏãú ÏÇ≠Ï†ú

#### 7. Í∞úÎ∞ú Í∞ÄÏù¥Îìú
- **`CLAUDE.md`** - AI Í∞úÎ∞ú ÏßÄÏπ®ÏÑú (ÌïµÏã¨ Î¨∏ÏÑú)
  - ÌîÑÎ°úÏ†ùÌä∏ Ï†ÑÏ≤¥ Í∑úÏπô Î∞è Ï†úÏïΩÏÇ¨Ìï≠
  - 36Í∞ú ÏßÄÌëú Ï†ïÏùò ('ÏàòÍ∏â ÏßÄÌëú'Îäî 11Í∞ú Ïª¨Îüº ÌôïÏû•)
  - Í∏∞Ïà† Ïä§Ìéô Î∞è Íµ¨ÌòÑ ÏõêÏπô

### üìä 44Í∞ú ÏßÄÌëú ÏÉÅÏÑ∏ Íµ¨ÏÑ±
1. **Í∏∞Î≥∏ Îç∞Ïù¥ÌÑ∞ (4Í∞ú)**: time, stock_code, current_price, volume
2. **Í∞ÄÍ≤© ÏßÄÌëú (5Í∞ú)**: ma5, rsi14, disparity, stoch_k, stoch_d
3. **Î≥ºÎ•® ÏßÄÌëú (3Í∞ú)**: vol_ratio, z_vol, obv_delta
4. **Bid/Ask ÏßÄÌëú (2Í∞ú)**: spread, bid_ask_imbalance
5. **Í∏∞ÌÉÄ ÏßÄÌëú (2Í∞ú)**: accel_delta, ret_1s
6. **Ìò∏Í∞Ä Í∞ÄÍ≤© (10Í∞ú)**: ask1~ask5, bid1~bid5
7. **Ìò∏Í∞Ä ÏûîÎüâ (6Í∞ú)**: ask1_qty~ask3_qty, bid1_qty~bid3_qty
8. **ÏàòÍ∏â ÏßÄÌëú (11Í∞ú)**: Í∞úÏù∏, Ïô∏Ïù∏, Í∏∞Í¥Ä, Ïó∞Í∏∞Í∏à, Ìà¨Ïã†, Î≥¥Ìóò, ÏÇ¨Î™®ÌéÄÎìú, ÏùÄÌñâ, Íµ≠Í∞Ä, Í∏∞ÌÉÄÎ≤ïÏù∏, ÌîÑÎ°úÍ∑∏Îû®
9. **ÏàòÍ∏â Ï¥ùÌï© (1Í∞ú)**: total_investor_net

### üîß Í∏∞Ïà†Ï†Å ÌïµÏã¨ ÏÇ¨Ìï≠

#### Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ Î∞©Ïãù
- **Ìã± Ï†ïÏùò**: Ï≤¥Í≤∞ Î∞úÏÉù ÏãúÏ†êÎßå (Í∞ÄÍ≤©/Í±∞ÎûòÎüâ Î≥ÄÎèôÏãú)
- **CSV Ï†ÄÏû•**: Ï≤¥Í≤∞ Ïù¥Î≤§Ìä∏Îßå Ï†ÄÏû•, Ìò∏Í∞ÄÎäî Î©îÎ™®Î¶¨Îßå ÏóÖÎç∞Ïù¥Ìä∏
- **Ï¢ÖÎ™©Î≥Ñ ÎèÖÎ¶Ω**: Í∞Å Ï¢ÖÎ™©Î≥Ñ ÎèÖÎ¶ΩÏ†Å ÏÉÅÌÉú Í¥ÄÎ¶¨
- **Î∞∞Ïπò Ï†ÄÏû•**: I/O ÏµúÏ†ÅÌôîÎ•º ÏúÑÌïú Î∞∞Ïπò Ï†ÄÏû• Î∞©Ïãù

#### TR ÏöîÏ≤≠ Ï†úÌïú Í¥ÄÎ¶¨
- **ÎèôÏùº TR 60Ï¥à 1Ìöå Ï†úÌïú**: SimpleTRManagerÎ°ú Í¥ÄÎ¶¨
- **QTimer Í∏∞Î∞ò**: PyQt5 Ïù¥Î≤§Ìä∏ Î£®ÌîÑ Ìò∏Ìôò
- **ÏàòÍ∏â Îç∞Ïù¥ÌÑ∞**: OPT10059 TR Ï£ºÍ∏∞Ï†Å ÏöîÏ≤≠

#### ÌôòÍ≤Ω Ï†úÏïΩÏÇ¨Ìï≠
- **32ÎπÑÌä∏ Python 3.8** ÌïÑÏàò (ÌÇ§ÏõÄ OpenAPI+ ÏùòÏ°¥)
- **Windows ÌôòÍ≤Ω** ÌïÑÏàò
- **pykiwoom wrapper** ÏÇ¨Ïö© Í∂åÏû•
- **async ÏÇ¨Ïö© Í∏àÏßÄ**: QTimerÎßå ÏÇ¨Ïö©

### üöÄ Ïã§Ìñâ Î∞©Î≤ï

#### Í∏∞Î≥∏ Ïã§Ìñâ
```bash
C:\python38_32bit\python.exe main.py
```

#### ÏÑ§Ï†ï ÏàòÏ†ï
```python
# config.pyÏóêÏÑú TARGET_STOCKS ÏàòÏ†ï
TARGET_STOCKS = ["161390"]  # ÌòÑÏû¨ ÏÑ§Ï†ï
```

### üìÅ ÏÉùÏÑ±ÎêòÎäî Îç∞Ïù¥ÌÑ∞ ÌååÏùº

#### CSV ÌååÏùº ÏúÑÏπò
```
pure_websocket_data/
‚îú‚îÄ‚îÄ 161390_44indicators_realtime_20250829.csv
‚îú‚îÄ‚îÄ 005930_44indicators_realtime_20250828.csv
‚îî‚îÄ‚îÄ ...
```

#### Î°úÍ∑∏ ÌååÏùº
```
logs/
‚îú‚îÄ‚îÄ main_20250829_141818.log
‚îú‚îÄ‚îÄ kiwoom_client_20250829.log
‚îî‚îÄ‚îÄ ...
```

### üîç ÏµúÍ∑º ÌÖåÏä§Ìä∏ Í≤∞Í≥º (2025-08-29)
- **Ï¢ÖÎ™©**: 161390 (ÌïúÍµ≠ÌÉÄÏù¥Ïñ¥Ïï§ÌÖåÌÅ¨ÎÜÄÎ°úÏßÄ)
- **Îç∞Ïù¥ÌÑ∞ ÏàòÏßë**: Ï†ïÏÉÅ (Ìã± Îç∞Ïù¥ÌÑ∞ Ïã§ÏãúÍ∞Ñ ÏàòÏßë)
- **ÏßÄÌëú Í≥ÑÏÇ∞**: 44Í∞ú Î™®Îëê Ï†ïÏÉÅ
- **CSV Ï†ÄÏû•**: Î∞∞Ïπò Ï†ÄÏû• Ï†ïÏÉÅ ÏûëÎèô
- **ÏàòÍ∏â Îç∞Ïù¥ÌÑ∞**: OPT10059 TR Ï†ïÏÉÅ ÏàòÏã†

### ü§ñ GitHub Ï†ïÎ≥¥
- **URL**: https://github.com/fgfgt3-pixel/fgfgt3
- **Î∏åÎûúÏπò**: main (Îã®Ïùº Î∏åÎûúÏπò)
- **ÏÉÅÌÉú**: Public
- **ÏµúÍ∑º Ïª§Î∞ã**: 2025-08-29 ÏóÖÎç∞Ïù¥Ìä∏

### üìù Ï§ëÏöî Ï∞∏Í≥†ÏÇ¨Ìï≠
1. **CLAUDE.md**: AI Í∞úÎ∞ú Ïãú ÌïÑÏàò Ï∞∏Ï°∞ Î¨∏ÏÑú
2. **config.py**: Î™®Îì† ÏÑ§Ï†ïÏùò Ï§ëÏã¨ÏßÄ
3. **Ïã§ÏãúÍ∞Ñ ÌÖåÏä§Ìä∏**: Ïû• Ï§ëÏóêÎßå Ï†ïÏÉÅ ÏûëÎèô ÌôïÏù∏ Í∞ÄÎä•
4. **Ï†êÏßÑÏ†Å ÌôïÏû•**: 1Í∞ú Ï¢ÖÎ™© ‚Üí ÏµúÎåÄ 20Í∞ú Ï¢ÖÎ™©ÍπåÏßÄ ÌÖåÏä§Ìä∏

### üîß Î¨∏Ï†ú Ìï¥Í≤∞
- **Ïó∞Í≤∞ Ïã§Ìå®**: ConnectionMonitorÍ∞Ä ÏûêÎèô Ïû¨Ïó∞Í≤∞
- **TR Ï†úÌïú**: SimpleTRManagerÍ∞Ä ÏûêÎèô Í¥ÄÎ¶¨
- **Îç∞Ïù¥ÌÑ∞ ÎàÑÎùΩ**: rolling window(deque)Î°ú ÌûàÏä§ÌÜ†Î¶¨ Í¥ÄÎ¶¨
- **ÌååÏùº Í∂åÌïú**: logs/, pure_websocket_data/ ÏûêÎèô ÏÉùÏÑ±

---

## üìö ÌïµÏã¨ Python ÏΩîÎìú (Grok ÏùΩÍ∏∞Ïö©)

### 1. main.py - Î©îÏù∏ Ïã§Ìñâ ÌååÏùº
```python
"""
ÌÇ§ÏõÄ OpenAPI+ Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏàòÏßë ÏãúÏä§ÌÖú Î©îÏù∏ Ïã§Ìñâ
"""
import sys
import time
import signal
import logging
from datetime import datetime
from typing import Dict, Any
from PyQt5.QtCore import QTimer

from config import TARGET_STOCKS, KiwoomConfig, DataConfig, TRCode
from kiwoom_client import KiwoomClient, SimpleTRManager, ConnectionMonitor
from data_processor import DataProcessor, InvestorNetManager
from csv_writer import BatchCSVWriter

class KiwoomDataCollector:
    """ÌÇ§ÏõÄ OpenAPI+ Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏàòÏßë ÏãúÏä§ÌÖú Î©îÏù∏ ÌÅ¥ÎûòÏä§"""
    
    def __init__(self, target_stocks: list = None):
        self.target_stocks = target_stocks or TARGET_STOCKS
        self.running = False
        
        # Î™®Îìà Ï¥àÍ∏∞Ìôî
        self.kiwoom_client = None
        self.data_processor = None
        self.csv_writer = None
        self.tr_manager = None
        self.connection_monitor = None
        self.investor_manager = None
    
    def initialize_modules(self) -> bool:
        """Î™®Îì† Î™®Îìà Ï¥àÍ∏∞Ìôî"""
        # 1. ÌÇ§ÏõÄ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏
        self.kiwoom_client = KiwoomClient()
        
        # 2. QTimer Í∏∞Î∞ò Í¥ÄÎ¶¨ÏûêÎì§
        self.tr_manager = SimpleTRManager(self.kiwoom_client)
        self.connection_monitor = ConnectionMonitor(self.kiwoom_client)
        self.investor_manager = InvestorNetManager(self.target_stocks)
        
        # 3. Îç∞Ïù¥ÌÑ∞ ÌîÑÎ°úÏÑ∏ÏÑú
        self.data_processor = DataProcessor(self.target_stocks, self.kiwoom_client)
        
        # 4. CSV Ï†ÄÏû•ÏÜå
        self.csv_writer = BatchCSVWriter(self.target_stocks)
        
        return True
    
    def connect_callbacks(self):
        """ÏΩúÎ∞± Ïó∞Í≤∞"""
        # Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏΩúÎ∞±
        self.kiwoom_client.register_callback(
            'on_receive_real_data', 
            self.on_realtime_data
        )
        
        # TR Îç∞Ïù¥ÌÑ∞ ÏΩúÎ∞±
        self.kiwoom_client.register_callback(
            'on_receive_tr_data',
            self.on_tr_data
        )
    
    def start(self):
        """ÏãúÏä§ÌÖú ÏãúÏûë"""
        if not self.kiwoom_client.connect():
            return False
            
        # Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ Îì±Î°ù
        self.kiwoom_client.register_realdata(self.target_stocks)
        
        # Ïó∞Í≤∞ Î™®ÎãàÌÑ∞ÎßÅ ÏãúÏûë
        self.connection_monitor.start()
        
        # ÏàòÍ∏â Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÏûë
        self.setup_investor_update()
        
        self.running = True
        return True
```

### 2. kiwoom_client.py - ÌÇ§ÏõÄ API ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏
```python
"""
ÌÇ§ÏõÄ OpenAPI+ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏
"""
from PyQt5.QAxContainer import QAxWidget
from PyQt5.QtCore import QTimer, pyqtSignal, QObject
import time
import logging

class KiwoomClient(QObject):
    """ÌÇ§ÏõÄ OpenAPI+ OCX Ïª®Ìä∏Î°§ Í¥ÄÎ¶¨"""
    
    def __init__(self):
        super().__init__()
        self.ocx = QAxWidget("KHOPENAPI.KHOpenAPICtrl.1")
        self.connected = False
        self.callbacks = {}
        
        # Ïù¥Î≤§Ìä∏ Ïó∞Í≤∞
        self.ocx.OnEventConnect.connect(self._on_event_connect)
        self.ocx.OnReceiveRealData.connect(self._on_receive_real_data)
        self.ocx.OnReceiveTrData.connect(self._on_receive_tr_data)
    
    def connect(self) -> bool:
        """ÌÇ§ÏõÄ ÏÑúÎ≤Ñ Ïó∞Í≤∞"""
        err = self.ocx.dynamicCall("CommConnect()")
        if err != 0:
            return False
        
        # Î°úÍ∑∏Ïù∏ ÎåÄÍ∏∞
        self.login_event_loop = QEventLoop()
        self.login_event_loop.exec_()
        
        return self.connected
    
    def register_realdata(self, stocks: list) -> bool:
        """Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ Îì±Î°ù"""
        SCREEN_BASE_TRADE = "5000"  # Ï≤¥Í≤∞Ïö©
        SCREEN_BASE_HOGA = "6000"   # Ìò∏Í∞ÄÏö©
        
        for idx, stock_code in enumerate(stocks):
            # Í∏∞Ï°¥ Îì±Î°ù Ï†úÍ±∞
            self.ocx.dynamicCall("SetRealRemove(QString, QString)", "ALL", stock_code)
            time.sleep(0.05)
            
            # Ï≤¥Í≤∞ Îç∞Ïù¥ÌÑ∞ Îì±Î°ù
            screen_trade = f"{SCREEN_BASE_TRADE}{idx:02d}"
            ret = self.ocx.dynamicCall(
                "SetRealReg(QString, QString, QString, QString)",
                screen_trade,
                stock_code,
                "10;11;12;13;14;15;16;17;18;20",  # Ï≤¥Í≤∞ FID
                "0" if idx == 0 else "1"
            )
            
            # Ìò∏Í∞Ä Îç∞Ïù¥ÌÑ∞ Îì±Î°ù
            screen_hoga = f"{SCREEN_BASE_HOGA}{idx:02d}"
            ret = self.ocx.dynamicCall(
                "SetRealReg(QString, QString, QString, QString)",
                screen_hoga,
                stock_code,
                "41;42;43;44;45;51;52;53;54;55",  # Ìò∏Í∞Ä FID
                "1"
            )
        
        return True
    
    def _on_receive_real_data(self, sCode, sRealType, sRealData):
        """Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÏàòÏã†"""
        if sRealType == "Ï£ºÏãùÏ≤¥Í≤∞":
            data = self._parse_trade_data(sCode, sRealData)
        elif sRealType in ["Ï£ºÏãùÌò∏Í∞ÄÏûîÎüâ", "Ï£ºÏãùÌò∏Í∞Ä"]:
            data = self._parse_hoga_data(sCode, sRealData)
        else:
            return
        
        # ÏΩúÎ∞± Ïã§Ìñâ
        if 'on_receive_real_data' in self.callbacks:
            self.callbacks['on_receive_real_data'](sCode, sRealType, data)
```

### 3. data_processor.py - Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ ÏóîÏßÑ
```python
"""
Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ Î∞è 36Í∞ú ÏßÄÌëú Í≥ÑÏÇ∞
"""
from collections import deque
import numpy as np
import time
from typing import Dict, Optional

class IndicatorCalculator:
    """36Í∞ú ÏßÄÌëú Ïã§ÏãúÍ∞Ñ Í≥ÑÏÇ∞"""
    
    def __init__(self, stock_code: str, buffer_size: int = 200):
        self.stock_code = stock_code
        self.buffer_size = buffer_size
        
        # Îç∞Ïù¥ÌÑ∞ Î≤ÑÌçº
        self.price_buffer = deque(maxlen=buffer_size)
        self.volume_buffer = deque(maxlen=buffer_size)
        self.time_buffer = deque(maxlen=buffer_size)
        self.high_buffer = deque(maxlen=buffer_size)
        self.low_buffer = deque(maxlen=buffer_size)
        
    def update_tick_data(self, tick_data: Dict) -> Dict:
        """Ìã± Îç∞Ïù¥ÌÑ∞ ÏóÖÎç∞Ïù¥Ìä∏ Î∞è ÏßÄÌëú Í≥ÑÏÇ∞"""
        # ÏãúÍ∞ÑÍ≥º Í∞ÄÍ≤© Ï∂îÏ∂ú
        current_time = int(tick_data.get('time', int(time.time() * 1000)))
        current_price = float(tick_data.get('current_price', 0))
        current_volume = int(tick_data.get('volume', 0))
        
        if current_price <= 0:
            return {}
        
        # Î≤ÑÌçº ÏóÖÎç∞Ïù¥Ìä∏
        self.price_buffer.append(current_price)
        self.volume_buffer.append(current_volume)
        self.time_buffer.append(current_time)
        
        # 36Í∞ú ÏßÄÌëú Í≥ÑÏÇ∞
        indicators = self._calculate_all_indicators(tick_data)
        
        return indicators
    
    def _calculate_all_indicators(self, tick_data: Dict) -> Dict:
        """36Í∞ú ÏßÄÌëú Ï†ÑÏ≤¥ Í≥ÑÏÇ∞"""
        result = {
            # Í∏∞Î≥∏ Îç∞Ïù¥ÌÑ∞
            'time': tick_data.get('time'),
            'stock_code': self.stock_code,
            'current_price': tick_data.get('current_price'),
            'volume': tick_data.get('volume'),
            
            # Í∞ÄÍ≤© ÏßÄÌëú
            'ma5': self._calculate_ma(5),
            'rsi14': self._calculate_rsi(14),
            'disparity': self._calculate_disparity(),
            'stoch_k': self._calculate_stochastic_k(14),
            'stoch_d': self._calculate_stochastic_d(14, 3),
            
            # Î≥ºÎ•® ÏßÄÌëú
            'vol_ratio': self._calculate_volume_ratio(),
            'z_vol': self._calculate_z_score_volume(),
            'obv_delta': self._calculate_obv_delta(),
            
            # Ìò∏Í∞Ä ÏßÄÌëú
            'spread': self._calculate_spread(tick_data),
            'bid_ask_imbalance': self._calculate_bid_ask_imbalance(tick_data),
        }
        
        # Ìò∏Í∞Ä Îç∞Ïù¥ÌÑ∞ Ï∂îÍ∞Ä
        for i in range(1, 6):
            result[f'ask{i}'] = tick_data.get(f'ask{i}', 0)
            result[f'bid{i}'] = tick_data.get(f'bid{i}', 0)
            if i <= 3:
                result[f'ask{i}_qty'] = tick_data.get(f'ask{i}_qty', 0)
                result[f'bid{i}_qty'] = tick_data.get(f'bid{i}_qty', 0)
        
        return result
    
    def _calculate_ma(self, period: int) -> float:
        """Ïù¥ÎèôÌèâÍ∑† Í≥ÑÏÇ∞"""
        if len(self.price_buffer) < period:
            if len(self.price_buffer) > 0:
                return sum(self.price_buffer) / len(self.price_buffer)
            return 0
        return sum(list(self.price_buffer)[-period:]) / period
```

---
**ÏóÖÎç∞Ïù¥Ìä∏**: 2025-08-30 Grok Ï†ëÍ∑º Î≥µÏõêÏö© - Python ÏΩîÎìú Ìè¨Ìï®
**ÏÉÅÌÉú**: ÌîÑÎ°úÎçïÏÖò Î†àÎîî (Ïã§Ï†Ñ ÏÑúÎ≤Ñ ÌÖåÏä§Ìä∏ ÏôÑÎ£å)